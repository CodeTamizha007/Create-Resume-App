<mat-horizontal-stepper #stepper labelPosition="bottom">

    <!-- Step 1: Details -->
    <mat-step [stepControl]="details" errorMessage="Details required.">
        <form [formGroup]="details">
            <ng-template matStepLabel>Details</ng-template>
            <mat-form-field>
                <mat-label>Name</mat-label>
                <input matInput placeholder="Last name, First name" formControlName="name" required>
            </mat-form-field>
            <mat-form-field>
                <mat-label>Phone Number</mat-label>
                <input matInput formControlName="phoneno" required>
            </mat-form-field>
            <mat-form-field>
                <mat-label>Email</mat-label>
                <input matInput formControlName="mailid" required>
            </mat-form-field>
            <mat-form-field>
                <mat-label>Address</mat-label>
                <textarea matInput formControlName="address" placeholder="Enter your address" rows="2"></textarea>
            </mat-form-field>
            <div>
                <button mat-raised-button matStepperNext>Next</button>
            </div>
        </form>
    </mat-step>

    <mat-step>
        <ng-template matStepLabel>Education</ng-template>
        <div style="text-align: center; margin: 25px;">
          <h1>Add Education</h1>
          <button mat-fab aria-label="add education" color="primary" (click)="addEducation()">
            <mat-icon>add</mat-icon>
          </button>
        </div>
        <form [formGroup]="education">
          <div formArrayName="educationDetails">
            <div *ngFor="let edu of eduArr.controls; let i = index" [formGroupName]="i" class="education-item">
              <mat-form-field appearance="fill" style="width: 100%;">
                <mat-label>Institution Name</mat-label>
                <input matInput formControlName="institutionName" placeholder="Institution Name" />
              </mat-form-field>
              <mat-form-field appearance="fill" style="width: 100%;">
                <mat-label>Start Year</mat-label>
                <input matInput type="number" formControlName="startYear" placeholder="Start Year" />
              </mat-form-field>
              <mat-form-field appearance="fill" style="width: 100%;">
                <mat-label>End Year</mat-label>
                <input matInput type="number" formControlName="endYear" placeholder="End Year" />
              </mat-form-field>
              <mat-form-field appearance="fill" style="width: 100%;">
                <mat-label>Course</mat-label>
                <input matInput formControlName="course" placeholder="Course" />
              </mat-form-field>
              <mat-form-field appearance="fill" style="width: 100%;">
                <mat-label>Percentage</mat-label>
                <input matInput type="number" formControlName="percentage" placeholder="Percentage" />
              </mat-form-field>
              <button mat-icon-button matSuffix color="warn" type="button" (click)="removeEducation(i)"
                *ngIf="eduArr.length > 1">
                <mat-icon>remove_circle</mat-icon>
              </button>
            </div>
          </div>
          <div>
            <button mat-raised-button matStepperPrevious>Back</button>
            <button mat-raised-button matStepperNext>Next</button>
          </div>
        </form>
      </mat-step>
      

    <!-- Step 2: Role & Descriptions -->
    <mat-step optional="true">
        <form [formGroup]="role">
            <ng-template matStepLabel>Role & Descriptions</ng-template>
            <mat-form-field appearance="fill">
                <mat-label>Role</mat-label>
                <input matInput formControlName="role" required>
            </mat-form-field>
            <mat-form-field appearance="fill">
                <mat-label>Role Description</mat-label>
                <textarea matInput formControlName="roleDescription" placeholder="Describe your role"
                    rows="2"></textarea>
            </mat-form-field>
            <div>
                <button mat-raised-button matStepperPrevious>Back</button>
                <button mat-raised-button matStepperNext>Next</button>
            </div>
        </form>
    </mat-step>

    <!-- Step 3: Skills -->
    <mat-step>
        <div style="text-align: center; margin: 25px;">
            <h1>Add Skill</h1>
            <button mat-fab aria-label="add skill" color="primary" (click)="addSkill()">
                <mat-icon>add</mat-icon>
            </button>
        </div>
        <form [formGroup]="skills">
            <div formArrayName="skill">
                <div *ngFor="let skill of skillArr.controls; let i = index" class="skill-item">
                    <mat-form-field appearance="fill">
                        <mat-label>Enter Skill</mat-label>
                        <input matInput [formControlName]="i" placeholder="Skill Name" />
                        <button mat-icon-button matSuffix color="warn" type="button" (click)="removeSkills(i)"
                            *ngIf="skillArr.length > 1">
                            <mat-icon>remove_circle</mat-icon>
                        </button>
                    </mat-form-field>
                </div>
            </div>
            <div>
                <button mat-raised-button matStepperPrevious>Back</button>
                <button mat-raised-button matStepperNext>Next</button>
            </div>
        </form>
    </mat-step>

    <!-- Step 4: Awards & Certifications -->
    <mat-step>
        <ng-template matStepLabel>Awards & Certifications</ng-template>
        <div class="center-content">
            <h1>Add Certifications</h1>
            <button mat-fab aria-label="add certification" color="primary" (click)="addCertification()">
                <mat-icon>add</mat-icon>
            </button>
            <h1>Add Awards</h1>
            <button mat-fab aria-label="add award" color="primary" (click)="addAward()">
                <mat-icon>add</mat-icon>
            </button>
        </div>
        <form [formGroup]="certifications">
            <!-- Certifications Array -->
            <div formArrayName="certifications">
                <div *ngFor="let cert of certArr.controls; let i = index" class="skill-item">
                    <mat-form-field appearance="fill">
                        <mat-label>Enter Certification</mat-label>
                        <input matInput [formControlName]="i" placeholder="Certification Name" />
                        <button mat-icon-button matSuffix color="warn" type="button" (click)="removeCertification(i)"
                            *ngIf="certArr.length > 1">
                            <mat-icon>remove_circle</mat-icon>
                        </button>
                    </mat-form-field>
                </div>
            </div>
            <!-- Awards Array -->
            <div formArrayName="awards">
                <div *ngFor="let award of awardArr.controls; let i = index" class="skill-item">
                    <mat-form-field appearance="fill">
                        <mat-label>Enter Award</mat-label>
                        <input matInput [formControlName]="i" placeholder="Award Name" />
                        <button mat-icon-button matSuffix color="warn" type="button" (click)="removeAward(i)"
                            *ngIf="awardArr.length > 1">
                            <mat-icon>remove_circle</mat-icon>
                        </button>
                    </mat-form-field>
                </div>
            </div>
            <div class="button-container">
                <button mat-raised-button matStepperPrevious>Back</button>
                <button mat-raised-button matStepperNext>Next</button>
            </div>
        </form>
    </mat-step>

    <!-- Step 5: Experience -->
    <mat-step>
        <ng-template matStepLabel>Experience</ng-template>
        <div style="text-align: center; margin: 25px;">
            <h1>Add Experience</h1>
            <button mat-fab aria-label="add experience" color="primary" (click)="addExperience()">
                <mat-icon>add</mat-icon>
            </button>
        </div>
        <form [formGroup]="experience">
            <div formArrayName="experiences">
                <div *ngFor="let exp of expArr.controls; let i = index" [formGroupName]="i" class="experience-item">
                    <mat-form-field appearance="fill">
                        <mat-label>Company</mat-label>
                        <input matInput formControlName="company" placeholder="Company Name" />
                    </mat-form-field>
                    <mat-form-field appearance="fill">
                        <mat-label>Role</mat-label>
                        <input matInput formControlName="role" placeholder="Role" />
                    </mat-form-field>
                    <!-- Step 1: Details -->
                    <mat-form-field>
                        <mat-label>Start Date</mat-label>
                        <input matInput [matDatepicker]="startDatePicker" formControlName="startDate"
                            placeholder="Choose a date" required>
                        <mat-datepicker-toggle matPrefix [for]="startDatePicker"></mat-datepicker-toggle>
                        <mat-datepicker #startDatePicker></mat-datepicker>
                    </mat-form-field>

                    <mat-form-field>
                        <mat-label>End Date</mat-label>
                        <input matInput [matDatepicker]="endDatePicker" formControlName="endDate"
                            placeholder="Choose a date" required>
                        <mat-datepicker-toggle matPrefix [for]="endDatePicker"></mat-datepicker-toggle>
                        <mat-datepicker #endDatePicker></mat-datepicker>
                    </mat-form-field>

                    <mat-form-field appearance="fill">
                        <mat-label>Description</mat-label>
                        <textarea matInput formControlName="description" placeholder="Job Description"
                            rows="2"></textarea>
                    </mat-form-field>
                    <button mat-icon-button matSuffix color="warn" type="button" (click)="removeExperience(i)"
                        *ngIf="expArr.length > 1">
                        <mat-icon>remove_circle</mat-icon>
                    </button>
                </div>
            </div>
            <div>
                <button mat-raised-button matStepperPrevious>Back</button>
                <button mat-raised-button matStepperNext>Next</button>
            </div>
        </form>
    </mat-step>

    <mat-step>
        <ng-template matStepLabel>Photo & URLs</ng-template>
        <form [formGroup]="photoUrls">
            <!-- Photo Upload -->

            <!-- File Input Outside mat-form-field -->
            <div>
                <h1>photo</h1>
                <input type="file" (change)="onFileChange($event)" accept="image/*" />

                <img *ngIf="photoUrl" [src]="photoUrl" alt="Profile Photo" style="max-width: 100px; max-height: 100px;">
            </div>

            <!-- Profile URL -->
            <mat-form-field appearance="fill">
                <mat-label>Profile URL</mat-label>
                <input matInput formControlName="profileUrl" placeholder="Enter your profile URL" />
            </mat-form-field>

            <!-- LinkedIn URL -->
            <mat-form-field appearance="fill">
                <mat-label>LinkedIn URL</mat-label>
                <input matInput formControlName="linkedinUrl" placeholder="Enter your LinkedIn URL" />
            </mat-form-field>

            <!-- Other URL -->
            <mat-form-field appearance="fill">
                <mat-label>Other URL</mat-label>
                <input matInput formControlName="otherUrl" placeholder="Enter another URL" />
            </mat-form-field>

            <div>
                <button mat-raised-button matStepperPrevious>Back</button>
                <button mat-raised-button matStepperNext>Next</button>
            </div>
        </form>
    </mat-step>

    <!-- Final Step -->
    <mat-step>
        <ng-template matStepLabel>Review</ng-template>

        <mat-card class="review-card">
            <mat-card-header>
                <mat-card-title>
                    <h2>Review Your Details</h2>
                </mat-card-title>
            </mat-card-header>
            <mat-card-content>
                <div id="resumeContent" class="review-details">
                    <img *ngIf="photoUrl" [src]="photoUrl" alt="Profile Photo" class="profile-photo">

                    <div class="details-section">
                        <h3>Personal Information</h3>
                        <p><strong>Name:</strong> {{details.value['name']}}</p>
                        <p><strong>Phone No:</strong> {{details.value['phoneno']}}</p>
                        <p><strong>Email:</strong> {{details.value['mailid']}}</p>
                        <p><strong>Address:</strong> {{details.value['address']}}</p>
                    </div>

                    <div class="details-section">
                        <h3>Role & Description</h3>
                        <p><strong>Role:</strong> {{role.value['role']}}</p>
                        <p><strong>Description:</strong> {{role.value['roleDescription']}}</p>
                    </div>

                    <div class="details-section">
                        <h3>Skills</h3>
                        <ul>
                            <li *ngFor="let skill of skills.value.skill">{{skill}}</li>
                        </ul>
                    </div>

                    <div class="details-section">
                        <h3>Certifications</h3>
                        <ul>
                            <li *ngFor="let cert of certifications.value.certifications">{{cert}}</li>
                        </ul>
                    </div>

                    <div class="details-section">
                        <h3>Awards</h3>
                        <ul>
                            <li *ngFor="let award of certifications.value.awards">{{award}}</li>
                        </ul>
                    </div>

                    <!-- <div class="details-section">
                <h3>Experience</h3>
                <div *ngFor="let value of exp">
                  <p><strong>Company:</strong> {{value?['company']}}:"":""</p>
                  <p><strong>Role:</strong> {{value['role']}}</p>
                  <p><strong>Start Date:</strong> {{value['startDate'] | date}}</p>
                  <p><strong>End Date:</strong> {{value['endDate'] | date}}</p>
                  <p><strong>Description:</strong> {{value['description']}}</p>
                  <mat-divider></mat-divider>
                </div>
              </div> -->
                </div>

                <div class="action-buttons">
                    <button mat-button matStepperPrevious>Back</button>
                    <button mat-button (click)="pdf()">Generate PDF</button>
                    <button mat-button (click)="stepper.reset()">Reset</button>
                </div>
            </mat-card-content>
        </mat-card>
    </mat-step>


</mat-horizontal-stepper>